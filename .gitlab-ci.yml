image: "archlinux:latest"

before_script:
   - pacman -Syu --needed --noconfirm git uv
   - uv sync
   - uv run python manage.py collectstatic --noinput

lint:
  script:
     - uv run flake8 --exclude "*/migrations/" devel main mirrors news packages releng templates todolists visualize *.py

# TODO: https://docs.gitlab.com/ee/ci/junit_test_reports.html
test:
  script:
     - uv run coverage run --rcfile .coveragerc manage.py test
