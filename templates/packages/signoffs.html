{% extends "base.html" %}
{% block title %}Arch Linux - Package Signoffs{% endblock %}
{% block navbarclass %}anb-packages{% endblock %}

{% block content %}
<div id="dev-signoffs" class="box">

    <h2>Package Signoffs</h2>

    <p>{{ signoff_groups|length }} signoff group{{ signoff_groups|pluralize }} found.
    A "signoff group" consists of packages grouped by pkgbase, architecture, and repository.</p>

    <table id="signoffs" class="results">
        <thead>
            <tr>
                <th>Arch</th>
                <th>Package Base</th>
                <th># of Packages</th>
                <th>Version</th>
                <th>Last Updated</th>
                <th>Target Repo</th>
                <th>Approved</th>
                <th>Signoff</th>
            </tr>
        </thead>
        <tbody>
            {% for group in signoff_groups %}
            {% with group.package as pkg %}
            <tr class="{% cycle 'odd' 'even' %}">
                <td>{{ pkg.arch.name }}</td>
                <td><a href="{{ pkg.get_absolute_url }}"
                        title="View package details for {{ pkg.pkgname }}">{{ pkg.pkgname }}</a></td>
                <td>{{ group.packages|length }}</td>
                <td>{{ pkg.full_version }}</td>
                <td>{{ pkg.last_update|date }}</td>
                <td>{{ group.target_repo }}</td>
                <td class="signoff-{{group.approved|yesno}}">
                    {{ group.approved|yesno:"Yes,No" }}</td>
                <td>
                    <ul>
                        <li><a class="signoff-link" href="{{ pkg.get_absolute_url }}signoff/"
                            title="Signoff {{ pkg.pkgname }} for {{ pkg.arch }}">Signoff</a>
                        </li>
                        {% for signoff in group.signoffs %}
                        <li class="signed-username" title="Signed off by {{ signoff.user }}">
                        {{ signoff.user }}{% if signoff.revoked %} (revoked){% endif %}</li>
                        {% endfor %}
                    </ul>
                </td>
            </tr>
            {% endwith %}
            {% endfor %}
        </tbody>
    </table>
</div>
{% load cdn %}{% jquery %}
<script type="text/javascript" src="/media/jquery.tablesorter.min.js"></script>
<script type="text/javascript" src="/media/archweb.js"></script>
<script type="text/javascript">
$(document).ready(function() {
    $('a.signoff-link').click(signoff_package);
    $(".results").tablesorter({widgets: ['zebra'], sortList: [[1,0]],
        headers: { 6: { sorter: false } } });
});
</script>
{% endblock %}
